<% content_for :head do %>
	<%= display_meta_tags description: @strip.description %>
	<%= display_meta_tags keywords: @keywords %>
	<%= display_meta_tags og: {
	  title: :title,
	  type: 'website',
	  url: strip_url(@strip),
	  image: strip_variant(@strip, "786"),
	  description: :description,
	  site_name: 'Pink Wug' 
	} %>
	<%= display_meta_tags twitter: {
	  card: 'summary_large_image',
	  site: '@pinkwug',
	  title: :title,
	  description: :description,
	  creator: '@pinkwug',
	  image: strip_variant(@strip, "786")
	} %>
	<script>
		document.addEventListener("DOMContentLoaded", function(){
			if (window.innerWidth <= 500) {
				document.querySelector('.parent').style.minHeight = window.innerWidth + "px";
				document.querySelector('.parent').style.minWidth  = window.innerWidth + "px";
			}
			if (window.innerWidth >  500) {
				document.querySelector('.parent').style.minHeight = "70vh";
				document.querySelector('.parent').style.minWidth  = "70vh";
			}
			if (document.querySelector('.comic').complete && document.querySelector('.comic').naturalWidth != 0){
				document.querySelector('.parent').style.minHeight = 0;
				document.querySelector('.parent').style.minWidth = 0;
			}
		});
	</script>
<% end %>
<div class="content">
	<h1 class="visually-hidden"><%= title @title %></h1>
	<div class="parent">
		<%= image_tag(url_for(@strip.image), 
		  srcset: { strip_variant(@strip, "375") => "375w",
								strip_variant(@strip, "600") => "600w",
								strip_variant(@strip, "786") => "786w",
								strip_variant(@strip, "1080") => "1080w",
							  strip_variant(@strip, "1600") => "1600w",
							  strip_variant(@strip, "1780") => "1780w",
							}, sizes: "70vh", alt: h(@strip.transcript).gsub(/\n/, '&#13;&#10;').html_safe, class: "#{@last} comic", tabindex: '0') %>
	</div>
	<%= render 'comicNav' %>
	<div class="comment", tabindex="0">
		<p>published in <%= @strip.created_at.strftime("%B %-d, %Y") %> </p>	
		<%= Rinku.auto_link(simple_format(@strip.comment), :all, 'target="_blank"').html_safe unless @strip.comment.blank? %>
		<% if @strip.has_print? %>
			<p>This comic has a print available for purchase in the
			<%= link_to "shop!", store_index_url << "?prints" %></p>
		<% end %>
		<div class="share_buttons">
			<% @links.each do |link| %>
				<%= link_to link, target: "_blank", class: split_url(link) do %>
					<span class="visually-hidden"><%= split_url(link) %></span>	
				<% end %>
			<% end %>
			<button class="tooltip" onclick="updateClipboard('<%= strip_url(@strip) %>')">
				<span>copy link</span>
			</button>
			<p>share this comic!</p>
		</div>
	</div>
</div>
<% content_for :javascripts do %>
  <%= javascript_include_tag "strips.js", "data-turbolinks-track" => true %>
  <script>
	 	document.querySelector(".comic").addEventListener('load', function(){
	 		console.log('Image Loaded')
			document.querySelector('.parent').style.minHeight = 0;
			document.querySelector('.parent').style.minWidth = 0;
		});
  	var icons = document.querySelectorAll(".icons");
  	for (let i=0; i < icons.length; i++){
  		icons[i].classList.remove("active");
  	}
  	document.querySelector(".header_logo").classList.add("active");
	</script>
<% end %>